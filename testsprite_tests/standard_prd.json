{
  "meta": {
    "project": "Event Management Platform",
    "date": "2025-10-04",
    "prepared_by": "Software Development Manager"
  },
  "product_overview": "Event Management Platform built with Next.js 15 and Directus CMS enabling event organizers to create, manage, and promote events, integrate with Stripe for secure ticket sales, and provide attendees with seamless ticket purchasing and management experience.",
  "core_goals": [
    "Provide a secure, robust authentication and authorization system with role-based access control.",
    "Enable event organizers to efficiently create, edit, configure, and manage events and associated ticketing.",
    "Seamlessly integrate Stripe for payment processing and organizer payout via Stripe Connect.",
    "Offer attendees intuitive ticket purchasing, viewing, and management capabilities.",
    "Support content editors with a dynamic block-based page builder integrated with Directus CMS, including live preview and draft modes.",
    "Implement a dynamic, extensible form system with validation and file upload capabilities.",
    "Deliver a public-facing event browsing and discovery experience with SEO optimization.",
    "Provide detailed dashboards for both organizers and users to manage their profiles, tickets, and event related data.",
    "Ensure performance, security, and modern web best practices, including server-side rendering, caching, and responsive design."
  ],
  "key_features": [
    "Complete Authentication & Authorization system with JWT, password reset, role-based access control, and protected routes.",
    "Event Management System for organizers, including event creation, editing, settings, statistics, participant and registration management.",
    "Ticket System allowing ticket type creation, pricing, quantity management, and user ticket purchase and viewing.",
    "Stripe Payment Integration supporting checkout sessions, organizer onboarding, webhook handling, and secure payment processing.",
    "User dashboard to view purchased tickets, manage profile and passwords, and view their event registrations.",
    "Organizer dashboard with statistics, event management, profile editing, Stripe connection status, and onboarding support.",
    "Public event pages with event browsing, detailed views, slug-based routing, and ticket purchase checkout.",
    "Directus CMS integration with dynamic block-based page builder supporting hero blocks, rich text, galleries, pricing, posts, forms, and events, plus live visual editing and draft previews.",
    "Dynamic Forms system with multiple field types, Zod validation, and integration with Directus schema.",
    "Blog system with post management, slug routing, and SEO metadata handling.",
    "Responsive navigation system with header, footer, mobile menus, user menu dropdown, and theme toggle for dark/light mode.",
    "Site-wide search functionality accessible via modal and powered with a dedicated search API endpoint.",
    "Image upload and management integrated with Directus files for event media and organizer logos.",
    "UI Component Library built with Radix UI and Tailwind CSS for consistent and accessible UI elements.",
    "SEO optimization features including dynamic sitemap generation and metadata management.",
    "Middleware and route protection with secure permission handling and CSRF protection.",
    "Toast notifications system for user feedback and error alerts."
  ],
  "user_flow_summary": [
    "Public user browses events via homepage or search modal, views event details, selects tickets, and completes payment through Stripe checkout.",
    "User creates account or logs in with secure authentication; can reset password if needed.",
    "After purchase, user views and manages tickets in their personal dashboard and profile settings.",
    "Organizer logs in, accesses organizer dashboard, creates new events filling details and uploading media.",
    "Organizer configures ticket types, pricing, and availability for events, then monitors ticket sales and revenue.",
    "Organizer manages event participants and registrations and configures event-specific settings.",
    "Organizer sets up Stripe Connect onboarding to receive payments, monitors Stripe connection status.",
    "Content editors use the dynamic page builder linked with Directus to create and preview site content, including blog posts and event listings.",
    "Users and organizers can update profiles, change passwords, and manage account settings through dedicated pages.",
    "Administrators manage users and content with full CMS and platform access, leveraging admin sidebar and dashboards."
  ],
  "validation_criteria": [
    "Authentication flow allows user registration, login, password reset, and correct role enforcement.",
    "Event creation and editing properly saves and displays event data, including images and complex configurations.",
    "Ticket types and inventory reflect accurately during purchase and dashboard views.",
    "Stripe checkout and payment processing complete successfully with correct fee application and organizer payout.",
    "User and organizer dashboards load accurate data, support profile management, and handle updates correctly.",
    "Dynamic page builder renders content as configured in Directus with all block types appearing as expected.",
    "Forms created with the dynamic form system validate inputs and handle file uploads securely and effectively.",
    "Public event pages are SEO optimized, load correctly with proper routing and metadata.",
    "Search feature returns relevant content across site sections with performant response times.",
    "Middleware effectively protects routes and APIs enforcing access control and security policies.",
    "Toast notifications appear for successful and erroneous actions providing clear user feedback.",
    "Dark/light theme toggle persists user preference across sessions and devices.",
    "Image uploads are stored, retrievable, and displayed correctly with Directus integration."
  ],
  "code_summary": {
    "tech_stack": [
      "TypeScript",
      "Next.js 15",
      "React 19",
      "Tailwind CSS",
      "Directus CMS",
      "PostgreSQL",
      "Stripe",
      "Radix UI",
      "React Hook Form",
      "Zod",
      "Shadcn UI"
    ],
    "features": [
      {
        "name": "Dynamic Page Builder",
        "description": "Block-based page builder system that dynamically renders pages from Directus CMS with composable blocks (hero, richtext, gallery, pricing, posts, forms)",
        "files": [
          "src/components/layout/PageBuilder.tsx",
          "src/components/blocks/BaseBlock.tsx",
          "src/components/blocks/Hero.tsx",
          "src/components/blocks/RichText.tsx",
          "src/components/blocks/Gallery.tsx",
          "src/components/blocks/Pricing.tsx",
          "src/components/blocks/Posts.tsx",
          "src/components/blocks/Form.tsx",
          "src/components/blocks/Events.tsx",
          "src/app/(public)/[[...permalink]]/page.tsx"
        ]
      },
      {
        "name": "Authentication System",
        "description": "Complete authentication system with login, register, password reset, JWT token management, and protected routes with role-based access control",
        "files": [
          "src/app/api/auth/login/route.ts",
          "src/app/api/auth/register/route.ts",
          "src/app/api/auth/logout/route.ts",
          "src/app/api/auth/refresh/route.ts",
          "src/app/api/auth/me/route.ts",
          "src/app/api/auth/token/route.ts",
          "src/app/api/auth/password/request/route.ts",
          "src/app/api/auth/password/reset/route.ts",
          "src/lib/auth/server-auth.ts",
          "src/lib/auth/cookies.ts",
          "src/lib/auth/permissions.ts",
          "src/contexts/AuthContext.tsx",
          "src/components/auth/ProtectedRoute.tsx",
          "src/middleware.ts",
          "src/hooks/useServerAuth.ts"
        ]
      },
      {
        "name": "Event Management System",
        "description": "Complete event management platform with event creation, editing, ticket sales, attendee tracking, and event configuration for event organizers",
        "files": [
          "src/app/admin/eventos/page.tsx",
          "src/app/admin/eventos/novo/page.tsx",
          "src/app/admin/eventos/[evento_id]/page.tsx",
          "src/app/admin/eventos/[evento_id]/editar/page.tsx",
          "src/app/admin/eventos/[evento_id]/configuracoes/page.tsx",
          "src/app/admin/eventos/[evento_id]/participantes/page.tsx",
          "src/app/admin/eventos/[evento_id]/inscricoes/page.tsx",
          "src/app/api/event-config/route.ts",
          "src/components/events/EventCheckout.tsx",
          "src/components/events/TicketSelection.tsx",
          "src/app/(public)/eventos/[slug]/page.tsx"
        ]
      },
      {
        "name": "Stripe Payment Integration",
        "description": "Complete Stripe integration for ticket purchases with checkout sessions, payment processing, and organizer onboarding with Stripe Connect",
        "files": [
          "src/app/api/stripe/checkout-session/route.ts",
          "src/app/api/organizer/stripe/onboarding/route.ts",
          "src/lib/stripe/server.ts",
          "src/lib/stripe/client.ts",
          "src/lib/stripe/webhooks.ts",
          "src/lib/fees.ts",
          "src/components/organizer/StripeOnboardingButton.tsx",
          "src/components/organizer/StripeStatusCard.tsx",
          "src/hooks/useCheckout.ts",
          "src/app/(public)/eventos/[slug]/checkout/page.tsx",
          "src/app/(public)/eventos/[slug]/checkout/success/page.tsx",
          "src/app/(public)/eventos/[slug]/checkout/cancel/page.tsx"
        ]
      },
      {
        "name": "Ticket Management",
        "description": "Ticket purchasing, viewing, and management system for users to buy and view their tickets for events",
        "files": [
          "src/components/tickets/MyTickets.tsx",
          "src/app/(public)/meus-ingressos/page.tsx",
          "src/components/admin/TicketFormModal.tsx",
          "src/components/admin/TicketManagementModal.tsx"
        ]
      },
      {
        "name": "Organizer Dashboard",
        "description": "Dashboard and management interface for event organizers with stats, profile management, and event administration",
        "files": [
          "src/app/admin/dashboard/page.tsx",
          "src/app/admin/configuracoes/page.tsx",
          "src/app/admin/layout.tsx",
          "src/components/admin/AdminHeader.tsx",
          "src/components/admin/AdminSidebar.tsx",
          "src/components/organizer/OrganizerNavigation.tsx",
          "src/app/api/organizer/stats/route.ts",
          "src/app/api/organizer/profile/route.ts",
          "src/app/api/organizer/logo/route.ts",
          "src/hooks/useOrganizer.ts"
        ]
      },
      {
        "name": "User Profile Management",
        "description": "User and organizer profile management with profile editing, password changes, and account settings",
        "files": [
          "src/app/(public)/perfil/page.tsx",
          "src/components/account/AccountPageContent.tsx",
          "src/components/account/UserProfileForm.tsx",
          "src/components/account/OrganizerProfileForm.tsx",
          "src/app/api/user/profile/route.ts",
          "src/app/api/user/password/route.ts"
        ]
      },
      {
        "name": "Directus CMS Integration",
        "description": "Deep integration with Directus headless CMS including data fetching, type generation, rate limiting, and form handling",
        "files": [
          "src/lib/directus/directus.ts",
          "src/lib/directus/fetchers.ts",
          "src/lib/directus/forms.ts",
          "src/lib/directus/directus-utils.ts",
          "src/lib/directus/generateDirectusTypes.ts",
          "src/hooks/useDirectusClient.ts",
          "src/types/directus-schema.ts"
        ]
      },
      {
        "name": "Dynamic Forms System",
        "description": "Dynamic form generation and validation system that creates forms based on Directus schema with Zod validation",
        "files": [
          "src/components/forms/DynamicForm.tsx",
          "src/components/forms/FormBuilder.tsx",
          "src/components/forms/FormField.tsx",
          "src/components/forms/fields/CheckboxField.tsx",
          "src/components/forms/fields/CheckboxGroupField.tsx",
          "src/components/forms/fields/RadioGroupField.tsx",
          "src/components/forms/fields/SelectField.tsx",
          "src/components/forms/fields/FileUploadField.tsx",
          "src/lib/zodSchemaBuilder.ts"
        ]
      },
      {
        "name": "Blog System",
        "description": "Blog functionality with post listings and individual post pages with SEO optimization",
        "files": [
          "src/app/(public)/blog/page.tsx",
          "src/app/(public)/blog/[slug]/page.tsx",
          "src/components/blocks/Posts.tsx"
        ]
      },
      {
        "name": "Visual Editing Integration",
        "description": "Directus Live Preview and visual editing integration for content editors to preview changes in real-time",
        "files": [
          "src/components/layout/VisualEditingLayout.tsx",
          "src/hooks/useVisualEditing.ts",
          "src/app/api/draft/route.ts"
        ]
      },
      {
        "name": "Navigation System",
        "description": "Dynamic navigation with header, footer, and mobile-responsive navigation menus generated from Directus",
        "files": [
          "src/components/layout/NavigationBar.tsx",
          "src/components/layout/Footer.tsx",
          "src/components/ui/navigation-menu.tsx"
        ]
      },
      {
        "name": "Search Functionality",
        "description": "Site-wide search functionality for finding content across the application",
        "files": [
          "src/app/api/search/route.ts",
          "src/components/ui/SearchModal.tsx"
        ]
      },
      {
        "name": "Image Upload & Management",
        "description": "Image upload functionality with Directus files integration for managing event images and logos",
        "files": [
          "src/app/api/upload/route.ts",
          "src/components/admin/ImageUpload.tsx",
          "src/components/shared/DirectusImage.tsx"
        ]
      },
      {
        "name": "Theme System",
        "description": "Dark/light theme support with theme persistence and toggle functionality",
        "files": [
          "src/components/ui/ThemeProvider.tsx",
          "src/components/ui/ThemeToggle.tsx"
        ]
      },
      {
        "name": "UI Component Library",
        "description": "Comprehensive UI component library built with Radix UI primitives and Tailwind CSS for consistent design",
        "files": [
          "src/components/ui/button.tsx",
          "src/components/ui/card.tsx",
          "src/components/ui/dialog.tsx",
          "src/components/ui/input.tsx",
          "src/components/ui/form.tsx",
          "src/components/ui/dropdown-menu.tsx",
          "src/components/ui/badge.tsx",
          "src/components/ui/alert.tsx",
          "src/components/ui/checkbox.tsx",
          "src/components/ui/radio-group.tsx",
          "src/components/ui/label.tsx",
          "src/components/ui/auth-modal.tsx",
          "src/components/ui/user-menu-dropdown.tsx",
          "src/components/ui/ShareDialog.tsx",
          "src/components/ui/pagination.tsx",
          "src/components/ui/collapsible.tsx",
          "src/components/ui/command.tsx",
          "src/components/ui/container.tsx",
          "src/components/ui/Headline.tsx",
          "src/components/ui/Text.tsx",
          "src/components/ui/Tagline.tsx"
        ]
      },
      {
        "name": "SEO & Metadata",
        "description": "SEO optimization with dynamic sitemap generation and metadata management",
        "files": [
          "src/app/sitemap.ts"
        ]
      },
      {
        "name": "Redirects Management",
        "description": "Dynamic redirect management system for handling URL redirects configured in Directus",
        "files": [
          "src/lib/redirects.ts"
        ]
      },
      {
        "name": "Middleware & Route Protection",
        "description": "Next.js middleware for authentication, authorization, and route protection with role-based access",
        "files": [
          "src/middleware.ts",
          "src/lib/auth/permissions.ts"
        ]
      },
      {
        "name": "Toast Notifications",
        "description": "Toast notification system for user feedback and error messages",
        "files": [
          "src/hooks/use-toast.ts",
          "src/components/ui/toast.tsx"
        ]
      }
    ]
  }
}
